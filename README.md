# rclUE Greenroom Fork

- Quite a lot of refactoring
- Uses system installed ROS2 instead of included binaries
- Reworked messages so the fields are accessible via Blueprints.
- Added thread safety to `rcl` calls.
- Remove Node and publisher initialisation complexity from Blueprints.


# Basic information
## Supported versions
- Ubuntu
- Unreal Engine 4.27 (This repo aims to track latest release version of the engine)
- ROS2 Foxy, Rolling

Windows is currently unsupported.


# Installation

## Install Unreal Engine
Follow Epic documentation on checking out and compiling Unreal Engine source code. 

## Install ROS2 Dependencies

- `ros_core`
- `example_interfaces`

## Add this plugin to an Unreal Engine project
1. Clone this repository in your project `Plugins` folder
2. Create a shell script in the root Project folder to launch the Unreal Engine editor (substituting `UNREAL_HOME`, `PROJECTS_HOME`, `ROS2_ENV` and `PROJECT_NAME` for the appropriate paths):

```bash
#!/bin/bash

UNREAL_HOME="/home/${USER}/UnrealEngine"
PROJECTS_HOME="/home/${USER}/Documents/Unreal Projects"
PROJECT_NAME="MyProject"
ROS2_ENV="/opt/ros/foxy"
EDITOR_COMMAND="${UNREAL_HOME}/Engine/Binaries/Linux/UE4Editor"

source ${ROS2_ENV}/setup.bash
(exec "$EDITOR_COMMAND" "${PROJECTS_HOME}/${PROJECT_NAME}/${PROJECT_NAME}.uproject")
```

3. within the Unreal Editor: Edit->Plugins, enable for `rclc`
4. change the world settings to use meters as units instead of the default centimeters


# Getting Started
TBD

# Notes on working with ROS2 and UE4
- rcl and void* types cannot be managed by UE4 (no UPROPERTY) and therefore can't be used directly in Blueprint. Whenever access to these variables is needed, the user should write a class to wrap it and all of their handling must be done in C++.
- some basic numerical types are not natively supported in Blueprint (e.g. double, unsigned int). In order to use these, a workaround is needed (a plugin implementing those types for BP, a modified UE4 or a custom implementation).
- In autogenerated messages, the method MsgToString() should be implemented by the user as its current purpose is to help debugging.
